From 5fe20232811bb620665f6f6996bddf0563aeb752 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <michael.i.doherty@intel.com>
Date: Tue, 4 Apr 2017 11:18:01 +0100
Subject: [PATCH] plugins: Use /usr/share/xdg/autostart for stateless
 compliance

--
rebased for version 3.26.0

Signed-off-by: Ikey Doherty <michael.i.doherty@intel.com>
Signed-off-by: Simental Magana, Marcos <marcos.simental.magana@intel.com>
---
 plugins/a11y-keyboard/Makefile.am       | 2 +-
 plugins/a11y-settings/Makefile.am       | 2 +-
 plugins/clipboard/Makefile.am           | 2 +-
 plugins/color/Makefile.am               | 2 +-
 plugins/datetime/Makefile.am            | 2 +-
 plugins/dummy/Makefile.am               | 2 +-
 plugins/housekeeping/Makefile.am        | 2 +-
 plugins/keyboard/Makefile.am            | 2 +-
 plugins/media-keys/Makefile.am          | 2 +-
 plugins/mouse/Makefile.am               | 2 +-
 plugins/power/Makefile.am               | 2 +-
 plugins/print-notifications/Makefile.am | 2 +-
 plugins/rfkill/Makefile.am              | 2 +-
 plugins/screensaver-proxy/Makefile.am   | 2 +-
 plugins/sharing/Makefile.am             | 2 +-
 plugins/smartcard/Makefile.am           | 2 +-
 plugins/sound/Makefile.am               | 2 +-
 plugins/wacom/Makefile.am               | 2 +-
 plugins/xsettings/Makefile.am           | 2 +-
 19 files changed, 19 insertions(+), 19 deletions(-)

diff --git a/plugins/a11y-keyboard/Makefile.am b/plugins/a11y-keyboard/Makefile.am
index e57e882..9a8849c 100644
--- a/plugins/a11y-keyboard/Makefile.am
+++ b/plugins/a11y-keyboard/Makefile.am
@@ -22,7 +22,7 @@ gsd_a11y_keyboard_LDADD =					\
 	$(top_builddir)/plugins/common/libcommon.la		\
 	$(A11Y_KEYBOARD_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.A11yKeyboard.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/a11y-settings/Makefile.am b/plugins/a11y-settings/Makefile.am
index d27e7c2..51dfa20 100644
--- a/plugins/a11y-settings/Makefile.am
+++ b/plugins/a11y-settings/Makefile.am
@@ -20,7 +20,7 @@ gsd_a11y_settings_LDADD =					\
 	$(top_builddir)/plugins/common/libcommon.la		\
 	$(A11Y_SETTINGS_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.A11ySettings.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/clipboard/Makefile.am b/plugins/clipboard/Makefile.am
index 3189ac6..f3bcc8e 100644
--- a/plugins/clipboard/Makefile.am
+++ b/plugins/clipboard/Makefile.am
@@ -26,7 +26,7 @@ gsd_clipboard_CPPFLAGS =					\
 
 gsd_clipboard_LDADD = $(CLIPBOARD_LIBS) $(top_builddir)/gnome-settings-daemon/libgsd.la
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Clipboard.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/color/Makefile.am b/plugins/color/Makefile.am
index 35dcad4..25f1d2e 100644
--- a/plugins/color/Makefile.am
+++ b/plugins/color/Makefile.am
@@ -77,7 +77,7 @@ gsd_color_LDADD =						\
 	$(COLOR_LIBS)						\
 	$(LIBM)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Color.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/datetime/Makefile.am b/plugins/datetime/Makefile.am
index 48ba891..8ea53db 100644
--- a/plugins/datetime/Makefile.am
+++ b/plugins/datetime/Makefile.am
@@ -43,7 +43,7 @@ gsd_datetime_LDADD =					\
 	$(DATETIME_LIBS)					\
 	$(LIBM)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Datetime.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/dummy/Makefile.am b/plugins/dummy/Makefile.am
index cb5856c..73cb278 100644
--- a/plugins/dummy/Makefile.am
+++ b/plugins/dummy/Makefile.am
@@ -19,7 +19,7 @@ gsd_dummy_CPPFLAGS =			\
 
 gsd_dummy_LDADD = $(DUMMY_LIBS) $(top_builddir)/gnome-settings-daemon/libgsd.la
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 
 desktop_DATA =
 if !SMARTCARD_SUPPORT
diff --git a/plugins/housekeeping/Makefile.am b/plugins/housekeeping/Makefile.am
index 3841edf..8edc628 100644
--- a/plugins/housekeeping/Makefile.am
+++ b/plugins/housekeeping/Makefile.am
@@ -53,7 +53,7 @@ gsd_housekeeping_LDADD =					\
 	$(top_builddir)/plugins/common/libcommon.la		\
 	$(HOUSEKEEPING_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Housekeeping.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/keyboard/Makefile.am b/plugins/keyboard/Makefile.am
index e4e6dfe..432fadc 100644
--- a/plugins/keyboard/Makefile.am
+++ b/plugins/keyboard/Makefile.am
@@ -27,7 +27,7 @@ gsd_keyboard_LDADD =					\
 	$(top_builddir)/plugins/common/libcommon.la	\
 	$(KEYBOARD_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Keyboard.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/media-keys/Makefile.am b/plugins/media-keys/Makefile.am
index 6f7d88f..88115a2 100644
--- a/plugins/media-keys/Makefile.am
+++ b/plugins/media-keys/Makefile.am
@@ -27,7 +27,7 @@ shell-key-grabber.h: Makefile.am org.gnome.ShellKeyGrabber.xml
 	              --c-namespace Shell			\
 	              $(srcdir)/org.gnome.ShellKeyGrabber.xml
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.MediaKeys.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/mouse/Makefile.am b/plugins/mouse/Makefile.am
index fa095c3..4c1b2bf 100644
--- a/plugins/mouse/Makefile.am
+++ b/plugins/mouse/Makefile.am
@@ -1,6 +1,6 @@
 plugin_name = mouse
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Mouse.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/power/Makefile.am b/plugins/power/Makefile.am
index 94606ad..7836668 100644
--- a/plugins/power/Makefile.am
+++ b/plugins/power/Makefile.am
@@ -2,7 +2,7 @@ BUILT_SOURCES =
 
 plugin_name = power
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Power.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/print-notifications/Makefile.am b/plugins/print-notifications/Makefile.am
index 0e6b6d7..71de4e5 100644
--- a/plugins/print-notifications/Makefile.am
+++ b/plugins/print-notifications/Makefile.am
@@ -1,6 +1,6 @@
 plugin_name = print-notifications
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.PrintNotifications.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/rfkill/Makefile.am b/plugins/rfkill/Makefile.am
index 3c5ec47..208f666 100644
--- a/plugins/rfkill/Makefile.am
+++ b/plugins/rfkill/Makefile.am
@@ -23,7 +23,7 @@ gsd_rfkill_LDADD =						\
 	$(top_builddir)/plugins/common/libcommon.la		\
 	$(RFKILL_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Rfkill.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/screensaver-proxy/Makefile.am b/plugins/screensaver-proxy/Makefile.am
index 3c9de44..0bd0d72 100644
--- a/plugins/screensaver-proxy/Makefile.am
+++ b/plugins/screensaver-proxy/Makefile.am
@@ -25,7 +25,7 @@ gsd_screensaver_proxy_LDADD =					\
 	$(top_builddir)/plugins/common/libcommon.la		\
 	$(SCREENSAVER_PROXY_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.ScreensaverProxy.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/sharing/Makefile.am b/plugins/sharing/Makefile.am
index df99688..3555480 100644
--- a/plugins/sharing/Makefile.am
+++ b/plugins/sharing/Makefile.am
@@ -20,7 +20,7 @@ gsd_sharing_LDADD =					\
 	$(top_builddir)/gnome-settings-daemon/libgsd.la \
 	$(SHARING_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Sharing.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/smartcard/Makefile.am b/plugins/smartcard/Makefile.am
index 4a2951a..afa2fd3 100644
--- a/plugins/smartcard/Makefile.am
+++ b/plugins/smartcard/Makefile.am
@@ -55,7 +55,7 @@ gsd_smartcard_LDADD =                                           \
 	$(top_builddir)/plugins/common/libcommon.la             \
 	$(SMARTCARD_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Smartcard.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/sound/Makefile.am b/plugins/sound/Makefile.am
index 472bdbf..208202c 100644
--- a/plugins/sound/Makefile.am
+++ b/plugins/sound/Makefile.am
@@ -20,7 +20,7 @@ gsd_sound_LDADD =						\
 	$(top_builddir)/plugins/common/libcommon.la		\
 	$(SOUND_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Sound.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/wacom/Makefile.am b/plugins/wacom/Makefile.am
index d62d0fc..3004674 100644
--- a/plugins/wacom/Makefile.am
+++ b/plugins/wacom/Makefile.am
@@ -61,7 +61,7 @@ gsd_wacom_LDADD =                                              \
 	$(WACOM_LIBS)                                           \
 	$(LIBM)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.Wacom.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
diff --git a/plugins/xsettings/Makefile.am b/plugins/xsettings/Makefile.am
index bc62c8a..b8cdf93 100644
--- a/plugins/xsettings/Makefile.am
+++ b/plugins/xsettings/Makefile.am
@@ -85,7 +85,7 @@ gsd_xsettings_LDADD =						\
 	$(top_builddir)/gnome-settings-daemon/libgsd.la		\
 	$(XSETTINGS_LIBS)
 
-desktopdir = $(sysconfdir)/xdg/autostart
+desktopdir = $(datadir)/xdg/autostart
 desktop_in_files = org.gnome.SettingsDaemon.XSettings.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
 
-- 
2.14.1

